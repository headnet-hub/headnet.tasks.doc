# ML System Design Doc - HeadNet Tasks MVP v1.0 [RU]
## Дизайн ML системы - HeadNet Tasks MVP №1

*Шаблон ML System Design Doc от телеграм-канала [Reliable ML](https://t.me/reliable_ml)*

### 1. Цели и предпосылки 
#### 1.1. Зачем идем в разработку продукта?  

- **Бизнес-цель:** Разработка приложения HeadNet Tasks для помощи пользователям в управлении задачами и эмоциональным благополучием. Предоставление инструментов для мониторинга влияния различных задач и событий на настроение пользователя, а также предложение персонализированных советов для улучшения качества жизни.
- **Польза от использования ML:** ML-модели будут анализировать взаимосвязь между задачами, событиями и настроением пользователя для предоставления целенаправленных рекомендаций и советов. Это позволит пользователям лучше понять свои эмоциональные реакции и адаптировать свои расписания для достижения баланса между продуктивностью и благополучием.
- **Критерии успеха:** Улучшение эмоционального состояния пользователей, повышение уровня их удовлетворенности жизнью и работой, а также повышение продуктивности за счет более эффективного планирования задач.

#### 1.2. Бизнес-требования и ограничения  

- **Бизнес-требования:** Разработка функционала AI Mood Tracker для отслеживания влияния задач на настроение, а также реализация рекомендательной системы для советов по улучшению качества жизни.
- **Бизнес-ограничения:** Ограниченное время разработки для MVP и необходимость обеспечения высокой точности и надежности предсказаний ML-моделей.
- **Критерии успеха пилота:** Повышение точности предсказаний влияния задач на настроение и удовлетворенность пользователей предложенными рекомендациями.

#### 1.3. Что входит в скоуп проекта/итерации, что не входит   

- **На закрытие каких БТ подписываемся:** Разработка и внедрение AI Mood Tracker и рекомендательной системы.
- **Что не будет закрыто:** Расширенный функционал, такой как управление задачами и событиями в Google Calendar и Google Tasks будет отложен до следующих итераций.
- **Результат с точки зрения качества кода:** Чистый, модульный, хорошо документированный код, удовлетворяющий стандартам индустрии.
- **Технический долг:** Некоторые функции оптимизации и масштабирования могут быть отложены до следующих итераций.

#### 1.4. Предпосылки решения  

- **Используемые данные:** Данные о задачах и событиях пользователей, их эмоциональные оценки за день, истории взаимодействия с рекомендациями.
- **Горизонт прогноза:** Долгосрочный (еженедельный, ежемесячный анализ).
- **Гранулярность модели:** Анализ на уровне индивидуального пользователя.

### 2. Методология

#### 2.1. Постановка задачи  

- Техническая задача: Разработка AI Mood Tracker для отслеживания влияния задач и событий на настроение пользователя, а также рекомендательной системы для советов по улучшению качества жизни.

#### 2.2. Блок-схема решения  

- Блок-схема включает этапы: внедрение модели классификации для определения категорий задач, анализ влияния категорий на настроение с помощью RandomForestRegressor и SHAP-значений, разработка и тренировка рекомендательной системы на основе SVD, интеграция с Google и Telegram API.

#### 2.3. Этапы решения задачи

1. **Подготовка данных:**
   - Использование данных календаря и задач пользователя (Google Calendar, Google Tasks) для классификации.
   - Сбор данных о настроении пользователя через оценки в Telegram bot.

2. **Внедрение модели классификации задач (joeddav/xlm-roberta-large-xnli):**
   - Классификация задач и событий в жизни пользователя для последующего анализа их влияния на настроение.

3. **Анализ влияния категорий на настроение:**
   - Использование RandomForestRegressor для анализа влияния различных категорий задач на настроение пользователя.
   - Применение SHAP-значений для определения вклада каждой категории в предсказание настроения.

4. **Разработка рекомендательной системы:**
   - Подготовка данных для рекомендательной системы, совместимых с библиотекой Surprise.
   - Обучение модели SVD на подготовленных данных.
   - Генерация персонализированных советов на основе предсказаний интересов пользователя.

5. **Интеграция с Google и Telegram API:**
   - Взаимодействие с Google Calendar и Google Tasks для сбора данных о задачах пользователя.
   - Интерактивный интерфейс в Telegram для взаимодействия с пользователем, сбора оценок настроения и предоставления рекомендаций.

6. **Тестирование и оптимизация системы:**
   - Проверка эффективности системы на пилотной группе пользователей.
   - Оптимизация алгоритмов на основе обратной связи.

### 3. Подготовка пилота  

#### 3.1. Способ оценки пилота

1. **Обратная Связь от Пользователей:**
   - Проведение опросов или сбор обратной связи через встроенные функции приложения для оценки удовлетворенности пользователями AI Mood Tracker и рекомендательной системы.

2. **Анализ Активности Пользователей:**
   - Оценка частоты использования ключевых функций приложения (например, ввод оценок настроения, взаимодействие с рекомендациями).
   - Анализ времени, проведенного пользователями в приложении, и частоты его открытий.

3. **Изменения в Настроении Пользователей:**
   - Анализ данных, собранных с помощью AI Mood Tracker, для отслеживания изменений в настроении пользователей после применения рекомендаций.

#### 3.2. Критерии Успешности Пилота

- **Улучшение Общего Впечатления от Приложения:**
   - Положительные отзывы от пользователей по поводу эффективности рекомендаций и влияния на настроение.
  
- **Повышение Уровня Взаимодействия:**
   - Увеличение частоты использования приложения и вовлеченности в его функции (например, частое введение оценок настроения, активное взаимодействие с рекомендациями).

- **Позитивное Влияние на Настроение:**
   - Заметное улучшение настроения пользователей, основываясь на данных, собранных через AI Mood Tracker.

Таким образом, оценка успешности пилота может быть основана на комплексном подходе, сочетающем пользовательскую обратную связь, аналитику активности и эффективность вли

#### 3.3. Подготовка пилота  

- **Вычислительные затраты:** Оценка необходимых вычислительных ресурсов для поддержки полнофункциональной версии приложения с AI Mood Tracker и рекомендательной системой. Планирование инфраструктуры и распределения ресурсов для эффективного функционирования приложения во время пилотного тестирования.
- **Уточнение параметров пилота:** В зависимости от результатов предварительных тестов и анализа данных, корректировка параметров пилота для оптимизации производительности и точности моделей.

### 4. Внедрение 

#### 4.1. Архитектура решения

- **Блок-схема и пояснения:**
    - Сервисы: AI Mood Tracker, Интеграция с Google и Telegram API.
    - Назначения: Анализ эмоционального состояния пользователя, предоставление персонализированных советов, управление задачами.
    - Методы API: Получение данных о задачах и событиях, отправка оценок настроения, получение рекомендаций.

#### 4.2. Описание инфраструктуры и масштабируемости

- **Инфраструктура и выбор:**
    - Использование облачных сервисов для хостинга приложения и моделей ML.
    - Плюсы: Гибкость, масштабируемость, надежность.
    - Минусы: Зависимость от внешнего поставщика, потенциальные затраты на облачные ресурсы.
    - Финальный выбор обоснован потребностью в высокой доступности и возможности масштабирования в зависимости от роста пользовательской базы.

#### 4.3. Требования к работе системы

- **SLA, пропускная способность и задержка:**
    - Высокая доступность (99.9% uptime).
    - Быстрый отклик системы на запросы пользователя.
    - Адекватное время обработки данных и предоставления рекомендаций.

#### 4.4. Безопасность системы

- **Потенциальная уязвимость системы:**
    - Риск несанкционированного доступа к данным пользователя.
    - Применение шифрования данных и строгих протоколов аутентификации.

#### 4.5. Безопасность данных

- **Соответствие GDPR и другим законам:**
    - Полная конфиденциальность данных пользователя.
    - Соблюдение правил хранения и обработки персональных данных.

#### 4.6. Издержки

- **Расчетные издержки на работу системы в месяц:**
    - Предварительный анализ затрат на облачные сервисы, поддержку и обслуживание системы.

#### 4.5. Integration points

- **Взаимодействие между сервисами:**
    - Связь между модулем AI Mood Tracker и рекомендательной системой.
    - Интеграция с внешними сервисами (Google, Telegram).

#### 4.6. Риски

- **Потенциальные риски и неопределенности:**
    - Технические проблемы в работе моделей ML.
    - Риски, связанные с масштабированием системы.
    - Необходимость постоянного обновления и поддержки системы для соответствия меняющимся требованиям пользователей.
